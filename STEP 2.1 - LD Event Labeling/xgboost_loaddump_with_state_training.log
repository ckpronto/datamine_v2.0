2025-08-31 22:27:48,609 - __main__ - INFO - üöÄ Starting ENHANCED XGBoost Load/Dump Event Detection Training
2025-08-31 22:27:48,609 - __main__ - INFO - üéØ Objective: Include STATE features to dramatically improve accuracy
2025-08-31 22:27:48,609 - __main__ - INFO - V1.1: Extracting training data with ALL Label Studio files (816 events) from database...
2025-08-31 22:27:58,164 - __main__ - INFO - V1.1 Extracted 1,744,043 samples from ALL label files (816 events)
2025-08-31 22:27:58,164 - __main__ - INFO - V1.1 Class distribution:
2025-08-31 22:27:58,267 - __main__ - INFO -   - background: 1,345,585 (77.2%)
2025-08-31 22:27:58,268 - __main__ - INFO -   - load_event: 296,950 (17.0%)
2025-08-31 22:27:58,268 - __main__ - INFO -   - dump_event: 101,508 (5.8%)
2025-08-31 22:27:58,268 - __main__ - INFO - 
State distribution:
2025-08-31 22:27:58,367 - __main__ - INFO -   - hauling: 1,014,170 (58.2%)
2025-08-31 22:27:58,367 - __main__ - INFO -   - loading: 355,402 (20.4%)
2025-08-31 22:27:58,367 - __main__ - INFO -   - unknown: 176,115 (10.1%)
2025-08-31 22:27:58,367 - __main__ - INFO -   - dumping: 122,372 (7.0%)
2025-08-31 22:27:58,367 - __main__ - INFO -   - idle: 46,878 (2.7%)
2025-08-31 22:27:58,367 - __main__ - INFO -   - stopped: 29,106 (1.7%)
2025-08-31 22:27:58,367 - __main__ - INFO - 
Software state distribution:
2025-08-31 22:27:58,473 - __main__ - INFO -   - autonomous: 966,726 (55.4%)
2025-08-31 22:27:58,474 - __main__ - INFO -   - fault: 386,138 (22.1%)
2025-08-31 22:27:58,474 - __main__ - INFO -   - intervention: 275,407 (15.8%)
2025-08-31 22:27:58,474 - __main__ - INFO -   - manual: 115,772 (6.6%)
2025-08-31 22:27:58,474 - __main__ - INFO - Engineering features for load/dump detection WITH STATE...
2025-08-31 22:27:59,749 - __main__ - INFO - üöÄ ONE-HOT ENCODING STATE - The Missing Feature!
2025-08-31 22:27:59,979 - __main__ - INFO - üöÄ ONE-HOT ENCODING SOFTWARE_STATE
2025-08-31 22:28:00,229 - __main__ - INFO - Enhanced feature engineering complete. Total features: 33
2025-08-31 22:28:00,282 - __main__ - INFO - Preparing features and labels WITH STATE...
2025-08-31 22:28:00,283 - __main__ - INFO - üéØ Added STATE features: ['state_dumping', 'state_hauling', 'state_idle', 'state_loading', 'state_stopped', 'state_unknown']
2025-08-31 22:28:00,283 - __main__ - INFO - üéØ Added SOFTWARE_STATE features: ['sw_state_autonomous', 'sw_state_fault', 'sw_state_intervention', 'sw_state_manual']
2025-08-31 22:28:00,283 - __main__ - INFO - ENHANCED feature set: 26 features
2025-08-31 22:28:00,283 - __main__ - INFO - State-related features: 10 out of 26
2025-08-31 22:28:01,265 - __main__ - INFO - Label mapping: {'background': 0, 'dump_event': 1, 'load_event': 2})
2025-08-31 22:28:02,581 - __main__ - INFO - Data split: 1,395,234 train, 348,809 test
2025-08-31 22:28:02,650 - __main__ - INFO - üöÄ Training ENHANCED XGBoost model with STATE features...
2025-08-31 22:28:02,650 - __main__ - INFO - Enhanced hyperparameters: {'objective': 'multi:softprob', 'num_class': 3, 'max_depth': 8, 'learning_rate': 0.1, 'n_estimators': 500, 'subsample': 0.8, 'colsample_bytree': 0.8, 'random_state': 42, 'tree_method': 'hist', 'enable_categorical': False, 'n_jobs': 100}
2025-08-31 22:28:40,658 - __main__ - INFO - Enhanced training completed in 38.01 seconds
2025-08-31 22:28:40,658 - __main__ - INFO - Evaluating ENHANCED model with STATE features...
2025-08-31 22:28:42,287 - __main__ - INFO - üéâ ENHANCED Test Accuracy: 0.9627 (96.27%)
2025-08-31 22:28:42,375 - __main__ - INFO - 
üéØ ENHANCED MODEL COMPARISON:
2025-08-31 22:28:42,375 - __main__ - INFO -   Enhanced XGBoost: 0.9627 (96.27%)
2025-08-31 22:28:42,375 - __main__ - INFO -   Original XGBoost:  0.9555 (95.55%)
2025-08-31 22:28:42,375 - __main__ - INFO -   State Machine:     0.6035 (60.35%)
2025-08-31 22:28:42,375 - __main__ - INFO -   Improvement vs Original: +0.0072 (+0.72 pp)
2025-08-31 22:28:42,375 - __main__ - INFO -   Improvement vs Baseline: +0.3592 (+35.92 pp)
2025-08-31 22:28:42,375 - __main__ - INFO - üéâ SUCCESS: Enhanced model exceeds original XGBoost!
2025-08-31 22:28:42,375 - __main__ - INFO - 
Enhanced Per-class Performance:
2025-08-31 22:28:42,375 - __main__ - INFO -   background:
2025-08-31 22:28:42,376 - __main__ - INFO -     Precision: 0.9710
2025-08-31 22:28:42,376 - __main__ - INFO -     Recall:    0.9811
2025-08-31 22:28:42,376 - __main__ - INFO -     F1-Score:  0.9760
2025-08-31 22:28:42,376 - __main__ - INFO -     Support:   269117.0
2025-08-31 22:28:42,376 - __main__ - INFO -   dump_event:
2025-08-31 22:28:42,376 - __main__ - INFO -     Precision: 0.8630
2025-08-31 22:28:42,376 - __main__ - INFO -     Recall:    0.8115
2025-08-31 22:28:42,376 - __main__ - INFO -     F1-Score:  0.8364
2025-08-31 22:28:42,376 - __main__ - INFO -     Support:   20302.0
2025-08-31 22:28:42,376 - __main__ - INFO -   load_event:
2025-08-31 22:28:42,376 - __main__ - INFO -     Precision: 0.9569
2025-08-31 22:28:42,376 - __main__ - INFO -     Recall:    0.9315
2025-08-31 22:28:42,376 - __main__ - INFO -     F1-Score:  0.9440
2025-08-31 22:28:42,376 - __main__ - INFO -     Support:   59390.0
2025-08-31 22:28:42,376 - __main__ - INFO - Generating ENHANCED feature importance plot...
2025-08-31 22:28:43,016 - __main__ - INFO - üéØ Top 15 Most Important Features (Enhanced Model):
2025-08-31 22:28:43,016 - __main__ - INFO -    1. üî¥ STATE state_loading: 0.541073
2025-08-31 22:28:43,017 - __main__ - INFO -    2. üî¥ STATE sw_state_intervention: 0.094685
2025-08-31 22:28:43,017 - __main__ - INFO -    3. üî¥ STATE sw_state_autonomous: 0.073516
2025-08-31 22:28:43,017 - __main__ - INFO -    4. üîµ PRNDL prndl_drive: 0.032413
2025-08-31 22:28:43,017 - __main__ - INFO -    5. üîµ PRNDL prndl_reverse: 0.026264
2025-08-31 22:28:43,017 - __main__ - INFO -    6. üî¥ STATE state_hauling: 0.026036
2025-08-31 22:28:43,017 - __main__ - INFO -    7. üî¥ STATE state_stopped: 0.023502
2025-08-31 22:28:43,017 - __main__ - INFO -    8. üü¢ SENSOR load_squared: 0.021099
2025-08-31 22:28:43,017 - __main__ - INFO -    9. üü¢ SENSOR latitude: 0.021040
2025-08-31 22:28:43,017 - __main__ - INFO -   10. üî¥ STATE sw_state_fault: 0.021032
2025-08-31 22:28:43,017 - __main__ - INFO -   11. üîµ PRNDL prndl_neutral: 0.019032
2025-08-31 22:28:43,017 - __main__ - INFO -   12. üî¥ STATE state_dumping: 0.018995
2025-08-31 22:28:43,017 - __main__ - INFO -   13. üü¢ SENSOR system_engaged: 0.012785
2025-08-31 22:28:43,017 - __main__ - INFO -   14. üü¢ SENSOR longitude: 0.010945
2025-08-31 22:28:43,017 - __main__ - INFO -   15. üü¢ SENSOR altitude: 0.010676
2025-08-31 22:28:43,017 - __main__ - INFO - Generating enhanced confusion matrix plot...
2025-08-31 22:28:43,546 - __main__ - INFO - Model V1.1 saved to: /home/ck/DataMine/APPLICATION/NN MODELS/2.1 Load Dump XGBoost/xgboost_enhanced_model_v1.1.json
2025-08-31 22:28:43,546 - __main__ - INFO - üéâ Enhanced results and model saved successfully!
2025-08-31 22:28:43,546 - __main__ - INFO - üéâ ENHANCED XGBoost Load/Dump Detection training completed successfully!
2025-08-31 22:28:43,547 - __main__ - INFO - üèÜ Final Enhanced Accuracy: 0.9627
